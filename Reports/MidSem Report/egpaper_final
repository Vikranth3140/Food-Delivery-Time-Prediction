\documentclass[10pt,twocolumn,letterpaper]{article}

\usepackage{cvpr}
\usepackage{times}
\usepackage{epsfig}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{amssymb}

\usepackage[breaklinks=true,bookmarks=false]{hyperref}

\cvprfinalcopy

\def\cvprPaperID{****} % *** Enter the CVPR Paper ID here
\def\httilde{\mbox{\tt\raisebox{-.5ex}{\symbol{126}}}}

\setcounter{page}{1}
\begin{document}

%%%%%%%%% TITLE
\title{Food Delivery Time Prediction: Machine Learning Project}

\author{
Vikranth Udandarao\\
Computer Science \& Engineering Dept. \\
IIIT-Delhi, India \\
{\tt\small vikranth22570@iiitd.ac.in}
\and
Mohammad Ayaan \\
Computer Science \& Engineering Dept. \\
IIIT-Delhi, India \\
{\tt\small ayaan22302@iiitd.ac.in}
\and
Swara Parekh \\
Computer Science \& Engineering Dept. \\
IIIT-Delhi, India \\
{\tt\small swara22524@iiitd.ac.in}
\and
Ananya Garg \\
Computer Science \& Engineering Dept. \\
IIIT-Delhi, India \\
{\tt\small ananya22068@iiitd.ac.in}
}

\maketitle
%\thispagestyle{empty}


%-------------------------------------------------------------------------
\begin{abstract}
    \textbf{Accurate delivery time estimates are crucial for customer satisfaction and operational efficiency in food delivery services. Delays due to traffic, weather, and multiple deliveries can significantly impact the customer experience. This project uses machine learning models—including Linear Regression, Decision Trees, Bagging, Random Forest, XGBoost, and LightGBM—to predict delivery times based on data related to traffic, weather, and delivery personnel. By employing feature selection and data preprocessing, we aim to enhance prediction accuracy. Models like Random Forest and LightGBM achieve promising R² scores above 0.75, demonstrating their effectiveness in improving logistics and service quality.}
\end{abstract}

%-------------------------------------------------------------------------
\section{Introduction}
Running a food delivery service comes with the challenge of keeping customers happy by delivering their meals on time and in condition despite hurdles like traffic or bad weather which can throw off the schedule unpredictably.

In order to address this issue effectively we are working on a Food Delivery Time Prediction System that utilizes machine learning methods. Our goal is to predict delivery times with precision by examining delivery data, current traffic situations and real time weather trends.

%-------------------------------------------------------------------------
\section{Literature Survey}
1. \textbf{DergiPark - Comparative Analysis of ML models}: The research paper titled "A Comparative Analysis of Machine Learning Models for Time Prediction in Food Delivery Operations" explores machine learning models like Random Forests and Gradient Boosting to enhance the precision of food delivery time forecasts by considering factors such as traffic volume and order quantity. Various performance indicators like Mean Absolute Error (MAE) and Root Mean Square Error (RMSE) were utilized by the researchers to assess the effectiveness of these models in predicting delivery times, in real world scenarios. The findings indicate that when it comes to making time predictions ensemble learning models, like Gradient Boosting tend to outperform methods. \cite{dergipark1}

2. \textbf{DergiPark - Application of Random Forest algorithm}: The study uses features like time of day, restaurant info, delivery costs, distance, and traffic conditions to predict food delivery time. Random Forest (RF), an ensemble learning method, combines multiple models for better accuracy. RF builds on the Bagging method by adding randomness in feature selection, improving performance and reducing overfitting. 500 estimator trees and three randomly selected variables per split, the model achieved around 95\% accuracy. The model handles majority classes well but struggles with imbalanced data. Cross-validation and Bootstrap methods confirmed RF's high accuracy and reliability. Performance measures like confusion matrices, Kappa statistics, and cross-validation are employed to validate the model’s accuracy and error rate. Alternative methods, like the Bootstrap method also yield high classification rates. \cite{dergipark2}

%-------------------------------------------------------------------------
\section{Dataset}
    The dataset used in this project is obtained from a publicly available source on Kaggle \cite{kaggle}. It contains comprehensive records of food delivery services, with details on delivery times, weather conditions, traffic density, and information about the delivery personnel and locations involved. These features, combined with the target variable representing delivery time, make it an ideal dataset for training machine learning models to predict delivery times.
    
   \subsection{Data Preprocessing}
        The dataset required handling inconsistencies, mixed data types, and missing values to prepare it for machine learning which can be viewed \href{https://github.com/Vikranth3140/ML-Project/blob/main/pre-processing.py}{\textbf{here}}. The main preprocessing steps are summarized below:
        
        \begin{itemize}
            \item Removed \textit{conditions} prefix from \textit{Weatherconditions}.
            \item Standardized columns like \textit{ID}, \textit{Road\_traffic\_density}, \textit{Type\_of\_order}, \textit{City}, etc. as strings.
            \item Converted \textit{Delivery\_person\_Age}, \textit{Vehicle\_condition}, \textit{multiple\_deliveries} to integers.
            \item Converted \textit{Delivery\_person\_Ratings}, latitudes, and longitudes to floats.
            \item Extracted and converted \textit{Time\_taken(min)} to integers.
            \item Converted \textit{Order\_Date} to \textit{datetime} and extracted time from \textit{Time\_Orderd} and \textit{Time\_Order\_picked}.
            \item Dropped rows with null values, reducing the dataset to 41,368 rows.
        \end{itemize}
    
    \subsection{Feature Summary}
        After preprocessing, the dataset contained the following features with their respective data types:
        
        \begin{table}[h]
            \centering
            \begin{tabular}{|l|l|}
                \hline
                \textbf{Column Name}               & \textbf{Data Type} \\
                \hline
                ID                                 & object             \\
                Delivery\_person\_ID               & object             \\
                Delivery\_person\_Age              & int64              \\
                Delivery\_person\_Ratings          & float64            \\
                Restaurant\_latitude               & float64            \\
                Restaurant\_longitude              & float64            \\
                Delivery\_location\_latitude       & float64            \\
                Delivery\_location\_longitude      & float64            \\
                Order\_Date                        & datetime           \\
                Time\_Orderd                       & time               \\
                Time\_Order\_picked                & time               \\
                Weatherconditions                  & object             \\
                Road\_traffic\_density             & object             \\
                Vehicle\_condition                 & int64              \\
                Type\_of\_order                    & object             \\
                Type\_of\_vehicle                  & object             \\
                multiple\_deliveries               & int64              \\
                Festival                           & object             \\
                City                               & object             \\
                Time\_taken(min)                   & int64              \\
                \hline
            \end{tabular}
            \caption{Data types of the dataset features after preprocessing}
            \label{tab:dataset_dtypes}
        \end{table}

    % \subsection{Feature Importance}
    %     To identify the most important features in predicting delivery time, we used a \href{https://scikit-learn.org/1.5/modules/generated/sklearn.cluster.KMeans.html}{\textbf{KMeans}} to compute feature importance scores. The top features impacting delivery time prediction are `Road\_traffic\_density`, `multiple\_deliveries`, and `Delivery\_person\_Ratings`.
        
    %     \begin{itemize}
    %         \item \textbf{Traffic Density}: Traffic conditions (specifically low and jammed traffic) were the most important features, strongly affecting delivery time.
    %         \item \textbf{Multiple Deliveries}: The number of deliveries handled by the delivery person in a single trip also plays a crucial role in determining delivery time.
    %         \item \textbf{Delivery Person's Ratings}: Delivery personnel ratings were found to be highly correlated with delivery efficiency, with higher ratings likely indicating faster deliveries.
    %         \item \textbf{Age of Delivery Person}: The age of the delivery person was another significant factor, potentially indicating a correlation between experience/physical fitness and delivery performance.
    %         \item \textbf{Festival Season}: Whether or not it is a festival season impacts delivery time, likely due to increased demand and traffic congestion during such periods.
    %     \end{itemize}
        
    %     The remaining features, such as geographic coordinates (latitude and longitude of the restaurant and delivery location) and the type of order (meal, drinks, etc.), had a lesser impact on delivery time. The importance scores from the Random Forest model provide useful insights into which factors should be prioritized in efforts to optimize delivery times.
    
    \subsection{Exploratory Data Analysis (EDA)}
        Exploratory Data Analysis (EDA) was performed to understand the distribution of the variables in the dataset and to explore relationships between the different features. Various visualizations were created to provide insights into how key features like traffic density, weather conditions, vehicle type, and delivery person ratings affect the time taken for deliveries.
        
        \begin{figure}[ht]
            \centering
            \includegraphics[width=0.45\textwidth]{boxplot_City.png}
            \caption{Time Taken (min) by City Type.}
            \label{fig:city_type}
        \end{figure}
        
        From the analysis, it was observed that delivery times vary significantly across different city types. Deliveries in semi-urban areas tend to take longer compared to urban and metropolitan areas. The variation in delivery times is also more pronounced in semi-urban areas, likely due to logistical challenges.
        
        \begin{figure}[ht]
            \centering
            \includegraphics[width=0.45\textwidth]{boxplot_Road_traffic_density.png}
            \caption{Time Taken (min) by Road Traffic Density.}
            \label{fig:traffic_density}
        \end{figure}
        
        Road traffic density emerged as a key factor influencing delivery times. Areas experiencing traffic jams showed significantly longer delivery times compared to those with lighter traffic conditions.
        
        \begin{figure}[ht]
            \centering
            \includegraphics[width=0.45\textwidth]{violinplot_Weatherconditions.png}
            \caption{Time Taken (min) by Weather Conditions.}
            \label{fig:weather_conditions}
        \end{figure}
        
        Weather conditions also have a considerable effect on delivery times. Stormy, foggy, and windy conditions generally lead to longer delivery times, while sunny weather is associated with shorter delivery times, suggesting that unfavourable weather can delay deliveries.
        
        \begin{figure}[ht]
            \centering
            \includegraphics[width=0.45\textwidth]{histogram_Delivery_person_Ratings.png}
            \caption{Distribution of Delivery Person Ratings.}
            \label{fig:delivery_ratings}
        \end{figure}
        
        Analysis of delivery person ratings revealed that most delivery personnel have high ratings, with a large proportion scoring between 4.5 and 5.0. This indicates a high overall level of service quality from delivery personnel.
        
        \begin{figure}[ht]
            \centering
            \includegraphics[width=0.7\columnwidth]{pairplot.png}
            \caption{Pair Plot of Numeric Features.}
            \label{fig:pair_plot}
        \end{figure}
        
        The pair plot provides a comprehensive view of the relationships between numeric features in the dataset. This visualization helps in understanding potential correlations between variables, which can later inform the feature selection for model development.
        
        Overall, the EDA helped identify key variables that influence delivery time, such as traffic density, weather conditions, city type, and vehicle type. These factors will be important for building predictive models for delivery time estimation.

%-------------------------------------------------------------------------
\section{Methodology}
    In this project, we aim to predict food delivery times using machine learning techniques. The dataset contains various features such as weather conditions, traffic density, vehicle type, and delivery person characteristics. Our goal is to leverage these features to predict the time taken for a delivery.
    
    We followed a structured methodology which involved the following steps:
    \begin{itemize}
        \item \textbf{Data Collection and Preprocessing}: The dataset was preprocessed to handle inconsistencies, missing values, and data types. Categorical variables were label-encoded to prepare the data for machine learning models.
        \item \textbf{Feature Selection}: Feature importance techniques, such as using Random Forest's feature importances, were employed to identify the most influential features.
        \item \textbf{Model Training and Evaluation}: Multiple machine learning models were trained, evaluated, and compared using performance metrics such as R² score and Mean Squared Error (MSE).
        \item \textbf{Exploratory Data Analysis (EDA)}: Visualizations such as box plots, violin plots, and pair plots were generated to understand feature distributions and relationships.
    \end{itemize}
    
    \subsection{Model Selection}
        For predicting food delivery times, we have explored several regression techniques and ensemble methods like Linear Regression, Decision Trees, Bagging, Random Forests, Elastic Net Regularization, LightGBM, XGBoosting and K-Fold Cross-Validation.
        Ensemble methods like Random Forests and Gradient Boosting are capable of handling complex interactions and non-linearities in the data.
        
        \subsubsection{Linear Regression}
            Applied as a baseline model to explore the dataset’s linear relationships. It assumes a linear correlation between input features and the target variable. Although it provided initial insights, its performance was limited due to the complex nature of the data.
        
        \subsubsection{Decision Tree}
            Employed as a hierarchical decision support model. DTs use a tree-like structure to represent decisions and their consequences, including chance events, resource costs, and utility. They provide a clear visualization of the algorithm's decision-making process.
        
        \subsubsection{Bagging}
            Used to improve model performance by training multiple models on random subsets of the original data. The results from these models are combined through a voting mechanism to make predictions, resulting in more accurate and robust predictions.
        
        \subsubsection{Random Forest}
            Utilized as an ensemble learning method for classification. RF constructs multiple decision trees and makes predictions based on the majority vote of these trees. Despite efforts to reduce dataset dimensionality, the RF model exhibited overfitting on the training set and did not outperform other models significantly.
        
        \subsubsection{Elastic Net Regularization}
            Combines L1 and L2 regularization to handle multicollinearity and perform feature selection. It balances between Ridge and Lasso regression, allowing for robust predictions while reducing overfitting. This method was particularly useful for handling correlated features.
        
        \subsubsection{LightGBM}
            Implemented as a gradient boosting framework known for its speed and efficiency in handling large datasets. LightGBM splits trees leaf-wise, rather than level-wise like other boosting algorithms, which helps in reducing overfitting and achieving better performance, as evidenced by its high R² score.
        
        \subsubsection{XGBoost}
            Applied as a popular machine learning algorithm under ensemble learning. XGBoost is effective for supervised learning tasks like regression and classification. It iteratively builds a predictive model by combining predictions from multiple individual models, often decision trees, to enhance prediction accuracy and model performance.

        \subsubsection{K-Fold Cross-Validation}
            Implemented to evaluate the performance and generalizability of machine learning models. The dataset is split into K equally sized folds, and the model is trained on K-1 folds while being tested on the remaining fold. This process is repeated K times, with each fold used once as the validation set. The results are averaged to provide a robust estimate of model performance, reducing the likelihood of overfitting and ensuring that the model performs well on unseen data.

\usepackage{booktabs}

\begin{table}[h!]
    \centering
    % \caption{Test Metrics for Different Models}
    \begin{tabular}{|l|l|l|}
        \hline
        \textbf{Model} & \textbf{MSE} & \textbf{R² Score} \\ \hline
        Linear Regression              & 42.80     & 0.51      \\ \hline
        Decision Tree                  & 41.14     & 0.53      \\ \hline
        Decision Tree with Bagging     & 21.67     & 0.75      \\ \hline
        Random Forest                  & 21.21     & 0.75      \\ \hline
        Elastic Net Regularization     & 47.35     & 0.46      \\ \hline
        LightGBM                      & 16.88     & 0.80      \\ \hline
        XGBoost                       & 18.41     & 0.79      \\ \hline
    \end{tabular}
    \label{tab:model_metrics}
\end{table}
\textbf{Table 2.} Test Metrics for Different Models

%-------------------------------------------------------------------------
\section{Conclusion}
    In this project, we tried to predict food delivery time based on various features like traffic density, whether multiple deliveries are done, delivery person's age, delivery location, festival, city, type of order and vehicle, vehicle condition, delivery person rating, etc using machine learning techniques. The goal was to enhance delivery efficiency by considering multiple factors such as weather conditions, traffic density, and the delivery person's characteristics.
    
    We started by cleaning and preprocessing a real-world food delivery dataset, ensuring it was properly formatted and free of inconsistencies. Through Exploratory Data Analysis (EDA), we identified key factors like weather and traffic that impact delivery times. Several regression models were trained and evaluated, revealing that incorporating external factors significantly improves prediction accuracy, which could enhance customer satisfaction and operational efficiency for food delivery services.
    
    In future work, we aim to narrow down the features used to train the models using KMeans Best Features and do more data pre-processing and more ensemble methods to further enhance prediction accuracy.

    \subsection{Individual Contribution}
        - \textbf{Vikranth Udandarao}: Literature review, Data Collection, EDA, visualization of dataset, model analysis and results.
        
        - \textbf{Swara Parekh}: Literature review, Data Collection, EDA, visualization of dataset, model analysis and results.
        
        - \textbf{Mohammad Ayaan}: Literature review, Data Collection, EDA, visualization of dataset, model analysis and results.
        
        - \textbf{Ananya Garg}: Literature review, Data Collection, EDA, visualization of dataset, model analysis and results.

\begin{thebibliography}{9}
    \bibitem{dergipark1} 
        Comparative Analysis of ML Models for Food Delivery Prediction. 
        Available at: \url{https://dergipark.org.tr/en/pub/aita/issue/84471/1459560}.
    
    \bibitem{dergipark2} 
        Application of Random Forest Algorithm in Food Delivery Time Prediction. 
        Available at: \url{https://dergipark.org.tr/en/pub/forecasting/issue/60291/842180}.
    
    \bibitem{kaggle} 
        Gaurav Malik. 
        \emph{Food Delivery Dataset}. 
        Available at: \url{https://www.kaggle.com/datasets/gauravmalik26/food-delivery-dataset/data}.

\end{thebibliography}

\end{document}